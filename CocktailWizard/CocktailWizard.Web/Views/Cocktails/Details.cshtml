@model DetailsCocktailViewModel
@{
    ViewData["Title"] = "Details";
}

<head>
    <link rel="stylesheet" href="~/css/barsearchpartial.css" />
    <link rel="stylesheet" href="~/css/StarRating.css" />
</head>

<!--
 =========================================================
 * Material Kit - v2.0.6
 =========================================================
 * Product Page: https://www.creative-tim.com/product/material-kit
 * Copyright 2019 Creative Tim (http://www.creative-tim.com)
   Licensed under MIT (https://github.com/creativetimofficial/material-kit/blob/master/LICENSE.md)
 =========================================================
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->
<div class="page-header header-filter" data-parallax="true" style="background-image: url(@Model.ImagePath);">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h1 class="title">
                    <br />
                    @Model.Name
                </h1>
            </div>
        </div>
    </div>
</div>
<div class="main main-raised">
    <div class="profile-content">
        <div class="container">
            <div class="row">
                <div class="col-md-6 ml-auto mr-auto">
                    <div class="profile">
                        <div class="name">
                            <h2 class="title">@Model.Name</h2>
                        </div>
                    </div>
                </div>
            </div>
            <div class="description text-center">
                <p>@Model.Info</p>
            </div>
            <div class="row">
                <div class="col-md-6 ml-auto mr-auto">
                    <div class="profile-tabs">
                        <ul class="nav nav-pills nav-pills-icons justify-content-center" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" href="#studio" role="tab" data-toggle="tab">
                                    <i class="material-icons">store_mall_directory</i> Offered In
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#works" role="tab" data-toggle="tab">
                                    <i class="material-icons">rate_review</i>Rating
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#favorite" role="tab" data-toggle="tab">
                                    <i class="material-icons">favorite</i> Comments
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="tab-content tab-space justify-content-center">
                <div class="tab-pane active text-center gallery" id="studio">
                    <div class="row">
                        @foreach (var bar in @Model.Bars)
                        {
                            <div class="col-md-4">
                                <a asp-area="" asp-controller="Bars" asp-action="Details" asp-route-id="@bar.Id">
                                    <img src="@bar.ImagePath" class="detailsimage">
                                </a>
                                <h4 class="card-title">
                                    @bar.Name
                                    <br>
                                    <small class="card-description text-muted text-center">@bar.Address</small>
                                    <small class="card-description text-muted text-center">@bar.AverageRating</small>
                                </h4>
                            </div>
                        }
                    </div>
                </div>
                <div class="tab-pane text-center gallery " id="works">
                    <div class="row">
                        <form asp-area="Member" asp-controller="CocktailRatings" asp-action="Create">
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                            <div hidden class="form-group">
                                <input asp-for="CocktailRatingViewModels.First().CocktailId" type="hidden" value="@Model.Id">
                            </div>
                            <div class="container">
                                <div class="row">
                                    <div class="star-source">
                                        <svg>
                                            <linearGradient x1="50%" y1="5.41294643%" x2="87.5527344%" y2="65.4921875%" id="grad">
                                                <stop stop-color="#bf209f" offset="0%"></stop>
                                                <stop stop-color="#d62a9d" offset="60%"></stop>
                                                <stop stop-color="#ED009E" offset="100%"></stop>
                                            </linearGradient>
                                            <symbol id="star" viewBox="153 89 106 108">
                                                <polygon id="star-shape" stroke="url(#grad)" stroke-width="5" fill="currentColor" points="206 162.5 176.610737 185.45085 189.356511 150.407797 158.447174 129.54915 195.713758 130.842203 206 95 216.286242 130.842203 253.552826 129.54915 222.643489 150.407797 235.389263 185.45085"></polygon>
                                            </symbol>
                                        </svg>
                                    </div>
                                    <div class="star-container">
                                        <input type="radio" name="star" id="five" value="5">
                                        <label for="five">
                                            <svg class="star">
                                                <use xlink:href="#star" />
                                            </svg>
                                        </label>
                                        <input type="radio" name="star" id="four" value="4">
                                        <label for="four">
                                            <svg class="star">
                                                <use xlink:href="#star" />
                                            </svg>
                                        </label>
                                        <input type="radio" name="star" id="three" value="3">
                                        <label for="three">
                                            <svg class="star">
                                                <use xlink:href="#star" />
                                            </svg>
                                        </label>
                                        <input type="radio" name="star" id="two" value="2">
                                        <label for="two">
                                            <svg class="star">
                                                <use xlink:href="#star" />
                                            </svg>
                                        </label>
                                        <input type="radio" name="star" id="one" value="1">
                                        <label for="one">
                                            <svg class="star">
                                                <use xlink:href="#star" />
                                            </svg>
                                        </label>
                                        <input asp-for="CocktailRatingViewModels.First().Value" hidden="hidden" id="currentValue" value="" />
                                    </div>


                                </div>
                            </div>
                            <div class="form-group">
                                <input type="submit" value="Add rating" class="btn btn-primary" />
                            </div>
                        </form>
                    </div>
                </div>
                <div class="tab-pane text-center gallery justify-content-center" id="favorite">
                    <div class="row">
                        <div class="row bootstrap snippets d-flex justify-content-center">
                            <div class="col-md-6 col-md-offset-2 col-sm-12 ">
                                <div class="comment-wrapper">
                                    <div class="panel panel-info">
                                        <div class="panel-body">
                                            @* //TODO: think of a better restriction *@

                                            @if (User.Identity.IsAuthenticated)
                                            {
                                                <form id="comment-to-db">
                                                    <div>
                                                        <div>
                                                            <input type="text" class="form-control" id="comment-body" placeholder="Comment Text" />
                                                            <br>
                                                        </div>
                                                    </div>

                                                    <button type="submit" class="btn btn-info pull-right">Post Comment</button>
                                                </form>
                                                <div class="clearfix"></div>
                                                <hr>
                                            }

                                            <ul id="new-comment-here" class="media-list">
                                                @foreach (var item in Model.CocktailCommentViewModels)
                                                {
                                                    <li class="media">
                                                        <a href="#" class="pull-left">
                                                            <img src="https://bootdey.com/img/Content/user_1.jpg" alt="" class="img-circle">
                                                        </a>
                                                        <div class="media-body">
                                                            <span class="text-muted pull-right">
                                                                <small class="text-muted">
                                                                    @item.CreatedOn
                                                                </small>
                                                            </span>
                                                            <strong class="text-success">@item.UserName</strong>
                                                            <p>
                                                                @item.Body
                                                            </p>
                                                        </div>
                                                    </li>
                                                    <br />
                                                }

                                            </ul>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/js/AddCocktailComment.js"></script>
    <script>
        $(".star-container").on("change", (getId) => {
            let rt = $(getId)[0].target.defaultValue;
            console.log(rt);
            let a = $("#currentValue").val(rt);
            console.log(a);
        });
    </script>

}